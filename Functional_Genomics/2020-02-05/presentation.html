<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="author" content="Edmund Miller"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/css/theme/white.css" id="theme"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/npm/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide">
<h2 class="author">Edmund Miller</h2><p class="date">Created: 2020-02-02 Sun 18:30</p>
</section>
<section>
<section id="slide-orgd76c56d">
<h2 id="orgd76c56d">Open Protocols</h2>
<div class="outline-text-2" id="text-orgd76c56d">
</div>
</section>
<section id="slide-org0f5e819">
<h3 id="org0f5e819">Highlights</h3>
<ul>
<li>Markdown</li>
<li>Collaboration through Git</li>
<li>Automatic Deployment</li>

</ul>
</section>
<section id="slide-org8378d06">
<h3 id="org8378d06">Markdown</h3>
<div class="outline-text-3" id="text-org8378d06">
</div>
</section>
<section id="slide-orgf212662">
<h4 id="orgf212662">Intro</h4>
<ul>
<li><a href="https://commonmark.org/">https://commonmark.org/</a></li>

</ul>
<div class="org-src-container">

<pre  class="src src-markdown"><span style="color: #e95678; font-weight: bold;"># </span><span style="color: #e95678; font-weight: bold;">Heading 1</span>
<span style="color: #c7c9cb;">*</span><span style="color: #b877db; font-style: italic;">Italic</span><span style="color: #c7c9cb;">*</span>
<span style="color: #c7c9cb;">**</span><span style="color: #b877db;">Bold</span><span style="color: #c7c9cb;">**</span>

<span style="color: #e95678; font-weight: bold;">## </span><span style="color: #e95678; font-weight: bold;">Heading 2</span>
<span style="color: #e95678;">-</span> List
<span style="color: #e95678;">-</span> List
<span style="color: #e95678;">-</span> List

<span style="color: #e95678; font-weight: bold;">### Heading 3</span>
<span style="color: #c7c9cb;">---</span>

<span style="color: #c7c9cb; background-color: #1a1c23;">```</span><span style="color: #f09383; background-color: #1a1c23;">python</span>
<span style="color: #4e5059; background-color: #1a1c23; font-style: italic;"># </span><span style="color: #4e5059; background-color: #1a1c23; font-style: italic;">code block</span>
<span style="color: #b877db; background-color: #1a1c23;">print</span><span style="color: #f09383; background-color: #1a1c23;"> </span><span style="color: #fab795; background-color: #1a1c23;">'3 backticks or'</span>
<span style="color: #b877db; background-color: #1a1c23;">print</span><span style="color: #f09383; background-color: #1a1c23;"> </span><span style="color: #fab795; background-color: #1a1c23;">'indent 4 spaces'</span>
<span style="color: #c7c9cb; background-color: #1a1c23;">```</span>
</pre>
</div>
</section>
<section id="slide-org803b1d4">
<h3 id="org803b1d4">Collaboration through Git</h3>
<div class="outline-text-3" id="text-org803b1d4">
</div>
</section>
<section id="slide-orgae67007">
<h4 id="orgae67007">Intro to Git</h4>
<ul>
<li><a href="https://learnxinyminutes.com/docs/git/">https://learnxinyminutes.com/docs/git/</a></li>

</ul>
<div class="org-src-container">

<pre  class="src src-shell"><span style="color: #21bfc2;">git</span> clone https://gitlab.com/functional-genomics/docs.git
<span style="color: #4e5059; font-style: italic;"># </span><span style="color: #4e5059; font-style: italic;">Adds all the files in the current directory</span>
<span style="color: #21bfc2;">git</span> add .
<span style="color: #4e5059; font-style: italic;"># </span><span style="color: #4e5059; font-style: italic;">Creating a commit message</span>
<span style="color: #21bfc2;">git</span> commit -m <span style="color: #fab795;">"A commit message"</span>
<span style="color: #4e5059; font-style: italic;"># </span><span style="color: #4e5059; font-style: italic;">Pushing to the remote repo</span>
<span style="color: #21bfc2;">git</span> push
</pre>
</div>
</section>
<section id="slide-org0f5180e">
<h4 id="org0f5180e">Precommit</h4>
<ul>
<li>Code Formatting</li>
<li>Commit Formatting</li>

</ul>
</section>
<section id="slide-orgd2ee114">
<h4 id="orgd2ee114">Conventional Commits</h4>
<p>
Format:
</p>
<div class="org-src-container">

<pre  class="src src-shell">&lt;type&gt;<span style="color: #21bfc2;">[</span>optional scope<span style="color: #21bfc2;">]</span>: &lt;description&gt;

<span style="color: #21bfc2;">[</span>optional body<span style="color: #21bfc2;">]</span>

<span style="color: #21bfc2;">[</span>optional footer<span style="color: #6c6f93;">(</span>s<span style="color: #6c6f93;">)</span><span style="color: #21bfc2;">]</span>
</pre>
</div>
<p>
Example:
</p>
<div class="org-src-container">

<pre  class="src src-shell">feat: use poetry instead of conda
</pre>
</div>

<ul>
<li>Changelogs automatically generated</li>
<li><a href="https://semver.org/">https://semver.org/</a></li>

</ul>
</section>
<section id="slide-org2d521a1">
<h3 id="org2d521a1">CI/CD</h3>
<ul>
<li>Continuous Integration</li>
<li>Continuous Deployment</li>

</ul>
</section>
<section id="slide-org828e6b1">
<h4 id="org828e6b1">Features</h4>
<ul>
<li>Deploys Website whenever pushed to master</li>
<li>Checks merge requests for correct formatting</li>
<li>Creates PDFs of pages for Web lab use</li>

</ul>
</section>
<section id="slide-org0e8b86f">
<h4 id="org0e8b86f">GitLab</h4>
<ul>
<li>Password Authetication for Website</li>
<li>CI configured in yaml</li>

</ul>
</section>
<section id="slide-org97d0a54">
<h4 id="org97d0a54"><span class="todo TODO">TODO</span> Support for GitHub</h4>
</section>
<section id="slide-org388bd6f">
<h3 id="org388bd6f">Create Your Own!</h3>
<div class="org-src-container">

<pre  class="src src-shell">cookiecutter gl:functional-genomics/cookiecutter-open-protocol
</pre>
</div>
<p>
Fill in your lab info
</p>
</section>
<section id="slide-org61ed686">
<h3 id="org61ed686">TODO</h3>
<div class="org-src-container">

<pre  class="src src-shell">
</pre>
</div>
</section>
<section id="slide-org1211b23">
<h4 id="org1211b23">Workflow</h4>
<div class="org-src-container">

<pre  class="src src-shell"><span style="color: #21bfc2;">make</span> install
<span style="color: #4e5059; font-style: italic;"># </span><span style="color: #4e5059; font-style: italic;">Serving locally http://127.0.0.1:8000/</span>
<span style="color: #21bfc2;">make</span> serve
</pre>
</div>
</section>
</section>
<section>
<section id="slide-org3c47552">
<h2 id="org3c47552">Functional Genomics Documentation</h2>
<ul>
<li><a href="https://functional-genomics.gitlab.io/docs/">https://functional-genomics.gitlab.io/docs/</a></li>

</ul>
</section>
</section>
<section>
<section id="slide-org8bd0898">
<h2 id="org8bd0898">New and improved Snakemake</h2>
<div class="outline-text-2" id="text-org8bd0898">
</div>
</section>
<section id="slide-orgb0a18a6">
<h3 id="orgb0a18a6">Cookiecutter</h3>
<div class="org-src-container">

<pre  class="src src-shell">cookiecutter gl:functional-genomics/cookiecutter-snakemake-workflow
</pre>
</div>
</section>
<section id="slide-orga4d7100">
<h3 id="orga4d7100">Before</h3>
<p>
Setup
</p>
<div class="org-src-container">

<pre  class="src src-shell">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh
<span style="color: #21bfc2;">cd</span> project/dir
conda env create -f environment.yml
<span style="color: #4e5059; font-style: italic;"># </span><span style="color: #4e5059; font-style: italic;">Get Coffee while waiting on conda</span>
</pre>
</div>
<p>
Workflow
</p>
<div class="org-src-container">

<pre  class="src src-shell">conda activate smk
<span style="color: #21bfc2;">cd</span> &lt;project/dir&gt;
snakemake --use-conda --use-singularity
<span style="color: #4e5059; font-style: italic;"># </span><span style="color: #4e5059; font-style: italic;">Rerunning a specific rule</span>
snakemake --use-conda --use-singularity -R bowtie2
snakemake --report report.html
</pre>
</div>
</section>
<section id="slide-org4396ad3">
<h3 id="org4396ad3">After</h3>
<p>
Setup
</p>
<div class="org-src-container">

<pre  class="src src-shell"><span style="color: #21bfc2;">cd</span> &lt;project/dir&gt;
<span style="color: #21bfc2;">make</span> install
<span style="color: #21bfc2;">make</span>
<span style="color: #4e5059; font-style: italic;"># </span><span style="color: #4e5059; font-style: italic;">Or specific rules</span>
<span style="color: #21bfc2;">make</span> smk bowtie2
<span style="color: #21bfc2;">make</span> report
</pre>
</div>
</section>
<section id="slide-org3cec808">
<h3 id="org3cec808">Cluster</h3>
<div class="outline-text-3" id="text-org3cec808">
</div>
</section>
<section id="slide-org7de217c">
<h4 id="org7de217c">Before</h4>
<div class="org-src-container">

<pre  class="src src-shell"><span style="color: #21bfc2;">mkdir</span> -p ~/.config/snakemake
<span style="color: #21bfc2;">cd</span> ~/.config/snakemake
cookiecutter https://github.com/Snakemake-Profiles/slurm.git
<span style="color: #21bfc2;">cd</span> &lt;project/dir&gt;
snakemake --profile slurm
</pre>
</div>
</section>
<section id="slide-orgf4bac83">
<h4 id="orgf4bac83">After</h4>
<div class="org-src-container">

<pre  class="src src-shell"><span style="color: #21bfc2;">cd</span> &lt;project/dir&gt;
<span style="color: #21bfc2;">make</span> profile slurm
<span style="color: #21bfc2;">make</span> slurm
</pre>
</div>
</section>
</section>
<section>
<section id="slide-org3622ed3">
<h2 id="org3622ed3">Nix development</h2>
<div class="outline-text-2" id="text-org3622ed3">
</div>
</section>
<section id="slide-orgdef9846">
<h3 id="orgdef9846">Managing R environments</h3>
<ul>
<li><a href="https://nixos.wiki/wiki/R">https://nixos.wiki/wiki/R</a></li>
<li>Reproducible R enviroments</li>

</ul>
</section>
<section id="slide-orga444be9">
<h3 id="orga444be9">Installing nix</h3>
<div class="org-src-container">

<pre  class="src src-shell"><span style="color: #21bfc2;">curl</span> https://nixos.org/nix/install | sh
</pre>
</div>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/lib/js/head.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/js/reveal.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
mouseWheel: false,
fragmentInURL: false,
hashOneBasedIndex: false,
pdfSeparateFragments: true,

overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'convex', // see README of reveal.js for options
transitionSpeed: 'default',

// Optional libraries used to extend reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } }]

});
</script>
</body>
</html>
