<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Xonsh, Nix, &amp; Limma</title>
    <meta name="author" content="(Edmund Miller)" />
    <style type="text/css">
      .underline {
        text-decoration: underline;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/reveal.js/css/reveal.css"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/reveal.js/css/theme/white.css"
      id="theme"
    />

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if (window.location.search.match(/print-pdf/gi)) {
        var link = document.createElement("link");
        link.rel = "stylesheet";
        link.type = "text/css";
        link.href = "https://cdn.jsdelivr.net/npm/reveal.js/css/print/pdf.css";
        document.getElementsByTagName("head")[0].appendChild(link);
      }
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <section id="slide-org6b39273">
            <h2 id="org6b39273">Xonsh</h2>
            <div class="outline-text-2" id="text-org6b39273"></div>
          </section>
          <section id="slide-orga5022fc">
            <h3 id="orga5022fc">SciPy 2019</h3>
            <div class="outline-text-3" id="text-orga5022fc"></div>
          </section>
          <section id="slide-orga8b4685">
            <h4 id="orga8b4685">Links</h4>
            <div class="outline-text-4" id="text-orga8b4685"></div>
            <ul class="org-ul">
              <li>
                <a id="org195c0b3"></a
                ><a href="http://conference.scipy.org/">Conference List</a
                ><br />
              </li>
              <li>
                <a id="orgfa59dda"></a
                ><a href="https://xonsh.github.io/scipy-2019-tutorial/#1"
                  >Xonsh Tutorial</a
                ><br />
              </li>
              <li>
                <a id="org6be7af3"></a
                ><a
                  href="https://youtu.be/ujo9sbqHFqw?list=PLYx7XA2nY5GcDQblpQ_M1V3PQPoLWiDAC"
                  >Xonsh Talk</a
                ><br />
              </li>
              <li>
                <a id="org9b85f67"></a
                ><a
                  href="https://www.youtube.com/watch?v=ZB7BZMhfPgk&amp;list=PLYx7XA2nY5GcDQblpQ_M1V3PQPoLWiDAC"
                  >Talk Playlist</a
                ><br />
              </li>
            </ul>
          </section>
        </section>
        <section>
          <section id="slide-orgf494776">
            <h2 id="orgf494776">Nix</h2>
            <div class="outline-text-2" id="text-orgf494776"></div>
          </section>
          <section id="slide-org1791938">
            <h3 id="org1791938">Code as Infastructure</h3>
            <ul>
              <li>
                <a href="https://nixos.org/~eelco/pubs/nixos-jfp-final.pdf"
                  >NixOS: A Purely Functional Linux Distribution</a
                >
              </li>
            </ul>
          </section>
          <section id="slide-org2de07f9">
            <h3 id="org2de07f9">A Couple of Different Things</h3>
            <ul>
              <li>Nix Programming Language</li>
              <li>NIx Package Manager</li>
              <li>NixOS</li>
              <li>
                <a
                  href="https://www.youtube.com/watch?v=USDbjmxEZ_I&amp;list=PLYx7XA2nY5GcDQblpQ_M1V3PQPoLWiDAC&amp;index=16"
                  >SciPy Talk</a
                >
              </li>
            </ul>
          </section>
          <section
            id="slide-org046022b"
            data-background="img/HowNix.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h3 id="org046022b"></h3>
          </section>
          <section id="slide-org1c3bf41">
            <h3 id="org1c3bf41">Simple Derivation</h3>
            <div class="org-src-container">
              <pre
                class="src src-sh"
              ><code trim><code><span style="color: #82AAFF;">declare</span> -xp</code>
<code><span style="color: #82AAFF;">export</span> <span style="color: #89DDFF;">PATH</span>=<span style="color: #C3E88D;">"</span><span style="color: #FF5370;">$</span><span style="color: #89DDFF;">coreutils</span><span style="color: #C3E88D;">/bin"</span></code>
<code><span style="color: #FFCB6B;">echo</span> <span style="color: #C3E88D;">"hello"</span></code>
<code><span style="color: #FFCB6B;">echo</span> $<span style="color: #89DDFF;">blah</span></code>
<code><span style="color: #89DDFF;">dest</span>=$<span style="color: #89DDFF;">out</span>/bin</code>
<code><span style="color: #FFCB6B;">mkdir</span> -p $<span style="color: #89DDFF;">dest</span></code>
<code><span style="color: #FFCB6B;">cp</span> $<span style="color: #89DDFF;">src</span> $<span style="color: #89DDFF;">dest</span>/my-hello</code>
</code></pre>
            </div>
          </section>
          <section id="slide-org0524453">
            <h3 id="org0524453">Simple Derivation</h3>
            <div class="org-src-container">
              <pre
                class="src src-nix"
              ><code trim><code><span style="color: #82AAFF;">with</span> (<span style="color: #82AAFF;">import</span> <span style="color: #FF5370;">&lt;nixpkgs&gt;</span> {});</code>
<code><span style="color: #82AAFF;">derivation</span> {</code>
<code>  <span style="color: #89DDFF;">name</span> = <span style="color: #C3E88D;">"my_hello"</span>;</code>
<code>  <span style="color: #89DDFF;">builder</span> = <span style="color: #C3E88D;">"</span><span style="color: #82AAFF; font-weight: bold;">${</span>bash<span style="color: #82AAFF; font-weight: bold;">}</span><span style="color: #C3E88D;">/bin/bash"</span>;</code>
<code>  <span style="color: #89DDFF;">args</span> = [ <span style="color: #FF5370;">./build.sh</span> ];</code>
<code>  <span style="color: #89DDFF;">system</span> = builtins.currentSystem;</code>
<code>  <span style="color: #89DDFF;">coreutils</span> = coreutils;</code>
<code>  <span style="color: #89DDFF;">src</span> = <span style="color: #FF5370;">./my-hello</span>;</code>
<code>  <span style="color: #89DDFF;">blah</span> = <span style="color: #FF5370;">./blah</span>;</code>
<code>}</code>
</code></pre>
            </div>
          </section>
          <section id="slide-orged6ff41">
            <h3 id="orged6ff41">My Config</h3>
          </section>
          <section id="slide-orga08fe2a">
            <h3 id="orga08fe2a">Python and Nix</h3>
            <div class="outline-text-3" id="text-orga08fe2a"></div>
          </section>
          <section id="slide-orgc5749e9">
            <h4 id="orgc5749e9">Imperative Installation</h4>
            <div class="org-src-container">
              <pre
                class="src src-shell"
              ><code trim><code>$ nix-env -i hello</code>
<code>$ nix-env --list-generations</code>
<code>$ nix-env --rollback</code>
<code><span style="color: #5a5b5a;"># </span><span style="color: #5a5b5a;">View environment dependencies</span></code>
<code>$ nix-env -q</code>
</code></pre>
            </div>
          </section>
          <section id="slide-orgfff8a98">
            <h4 id="orgfff8a98">nix-shell</h4>
            <div class="org-src-container">
              <pre
                class="src src-shell"
              ><code trim><code>$ nix-shell --pure -p python27 -p python27Packages.numpy</code>
</code></pre>
            </div>
            <div class="org-src-container">
              <pre
                class="src src-shell"
              ><code trim><code>$ python -c <span style="color: #C3E88D;">"import numpy"</span></code>
<code>$ <span style="color: #FFCB6B;">echo</span> $<span style="color: #89DDFF;">PYTHONPATH</span></code>
</code></pre>
            </div>
          </section>
          <section id="slide-org9317fb3">
            <h4 id="org9317fb3">Repeatable Environment</h4>
            <div class="org-src-container">
              <pre
                class="src src-nix"
              ><code trim><code><span style="color: #5a5b5a;"># </span><span style="color: #5a5b5a;">shell.nix</span></code>
<code><span style="color: #82AAFF;">let</span></code>
<code>  <span style="color: #89DDFF;">nixpkgs</span> = <span style="color: #82AAFF;">import</span> <span style="color: #FF5370;">&lt;nixpkgs&gt;</span> {};</code>
<code>  <span style="color: #89DDFF;">pypkgs</span> = nixpks.python36Packages;</code>
<code><span style="color: #82AAFF;">in</span></code>
<code>  (pypkgs.python.withPackages (x: [ x.numpy x.scipy])).env</code>
</code></pre>
            </div>
            <ul>
              <li>Can also prevent version drift</li>
            </ul>
          </section>
          <section id="slide-orgfd62eb7">
            <h4 id="orgfd62eb7">buildPythonPackage</h4>
            <div class="org-src-container">
              <pre
                class="src src-nix"
              ><code trim><code>{ nixpkgs, pypkgs }:</code>
<code>pypkgs.buildPythonPackage <span style="color: #82AAFF;">rec</span> {</code>
<code>  <span style="color: #89DDFF;">pname</span> = <span style="color: #C3E88D;">"scipy"</span>;</code>
<code>  <span style="color: #89DDFF;">version</span> = <span style="color: #C3E88D;">"0.19.1"</span>;</code>
<code>  <span style="color: #89DDFF;">src</span> = pypkgs.fetchPypi {</code>
<code>    <span style="color: #82AAFF;">inherit</span> pname version;</code>
<code>    <span style="color: #89DDFF;">sha256</span> = <span style="color: #C3E88D;">"1rl411bvla6q7qfdb47fpdnyjhfgzl6smpha33n9ar1klykjr6m1"</span>;</code>
<code>  };</code>
<code>  <span style="color: #89DDFF;">buildInputs</span> = [</code>
<code>    pypkgs.numpy</code>
<code>    nixpkgs.pkgs.gcc</code>
<code>    nixpkgs.pkgs.gfortran</code>
<code>  ];</code>
<code>  <span style="color: #89DDFF;">ignoreCollisions</span>=true;</code>
<code>  <span style="color: #89DDFF;">catchConflicts</span>=false;</code>
<code>  <span style="color: #89DDFF;">doCheck</span> = <span style="color: #82AAFF;">false</span>;</code>
<code>}</code>
</code></pre>
            </div>
            <ul>
              <li>Fetch from PyPi</li>
              <li>Specify build time, run time, tests, dependancies</li>
              <li>
                Runs <code>setup.py install</code> or
                <code>setup.py develop</code>
              </li>
            </ul>
          </section>
          <section id="slide-org0663af7">
            <h4 id="org0663af7">PyPi2Nix</h4>
            <div class="org-src-container">
              <pre
                class="src src-shell"
              ><code trim><code>$ pypi2nix -V <span style="color: #C3E88D;">"3.6"</span> -r requirements.txt</code>
<code>$ nix-shell --pure requirements.nix</code>
</code></pre>
            </div>
            <ul>
              <li>Doesn't matter if packages aren't in nix packages</li>
            </ul>
          </section>
        </section>
        <section>
          <section id="slide-org1789236">
            <h2 id="org1789236">
              eRNA Prediction Pipeline from GRO-Seq INFB1 Induction Timecourse
            </h2>
            <div class="outline-text-2" id="text-org1789236"></div>
          </section>
          <section id="slide-org3849fd0">
            <h3 id="org3849fd0">Recap</h3>
            <div class="outline-text-3" id="text-org3849fd0"></div>
          </section>
          <section
            id="slide-orgde42c34"
            data-background="img/globaltrans.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h4 id="orgde42c34"></h4>
          </section>
          <section id="slide-orgdad46f7">
            <h4 id="orgdad46f7">Overview</h4>
            <ul>
              <li>Reproducing GM18</li>
              <li>Predicted IMR90 eRNAs</li>
              <li>Compared IMR90 Predicted Enhancers to GM</li>
              <li>Used Homer scripts to find DE of eRNAs and Genes</li>
              <li>Gene Centric vs. Enhancer Centric</li>
            </ul>
          </section>
          <section id="slide-orgcb6f07d">
            <h4 id="orgcb6f07d">Reproducing GM18</h4>
            <ul>
              <li>hg18 vs hg19</li>
              <li>Overpredicting eRNA transcripts</li>
              <li>
                Past Issue
                <ul>
                  <li>What I thought Peng sent me</li>
                  <li>hg18 -&gt; eRNAs -&gt; Me</li>
                  <li>What actually happened</li>
                  <li>hg18 -&gt; eRNAs -&gt; LiftOver -&gt; hg19 -&gt; Me</li>
                </ul>
              </li>
              <li>Main issue is homer uniqmap</li>
            </ul>
          </section>
          <section
            id="slide-org327f917"
            data-background="img/Figure_1.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h4 id="org327f917"></h4>
          </section>
          <section
            id="slide-orgfebe8c3"
            data-background="img/Figure_2.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h4 id="orgfebe8c3"></h4>
          </section>
          <section
            id="slide-org63a36b9"
            data-background="img/dag.png"
            data-background-size="400px"
            data-background-transition="slide"
          >
            <h4 id="org63a36b9"></h4>
          </section>
          <section id="slide-org78dddd7">
            <h4 id="org78dddd7">Actual Pipelines</h4>
            <div class="outline-text-4" id="text-org78dddd7"></div>
            <ul class="org-ul">
              <li>
                <a id="orge3731f0"></a><a href="files/GM18dag.pdf">GM18</a
                ><br />
              </li>
              <li>
                <a id="orgb1894a8"></a><a href="files/IMR19dag.pdf">IMR19</a
                ><br />
              </li>
              <li>
                <a id="org81ceb2c"></a><a href="files/all.pdf">All</a><br />
              </li>
            </ul>
          </section>
          <section id="slide-org3cd5016">
            <h4 id="org3cd5016">Predicted IMR90 eRNAs</h4>
            <p>
              Changes from GM18
            </p>
            <ul>
              <li>hg19</li>
              <li>No liftover</li>
            </ul>
          </section>
          <section id="slide-orgfc496c0">
            <h4 id="orgfc496c0">Compared IMR90 Predicted Enhancers to GM</h4>
          </section>
          <section
            id="slide-orga4ac049"
            data-background="img/Venn.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h4 id="orga4ac049"></h4>
          </section>
          <section id="slide-org5bf7cca">
            <h4 id="org5bf7cca">
              Used Homer scripts to find DE of eRNAs and Genes
            </h4>
          </section>
          <section id="slide-org0eb8c4c">
            <h4 id="org0eb8c4c">Gene Centric vs. Enhancer Centric</h4>
            <ul>
              <li>
                Peng's approach
                <ul>
                  <li>Took enhancers that were expressed deferentially</li>
                  <li>Linked them to Genes within 200Kb</li>
                </ul>
              </li>
              <li>
                New approach
                <ul>
                  <li>Take genes that are deferentially expressed</li>
                  <li>Link the Enhancers to those genes</li>
                </ul>
              </li>
            </ul>
          </section>
          <section
            id="slide-org051e2b7"
            data-background="viz/pipeline.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h4 id="org051e2b7"></h4>
          </section>
          <section id="slide-orga9c427d">
            <h4 id="orga9c427d">featureCounts</h4>
            <div class="outline-text-4" id="text-orga9c427d"></div>
            <ul class="org-ul">
              <li><a id="orgc7280d6"></a>Tried CLI version<br /></li>
              <li>
                <a id="orgd60527c"></a>Couldn't get examples to work with
                edgeR<br />
              </li>
              <li><a id="org8727691"></a>Switched to R package<br /></li>
              <li><a id="org5e0e1d1"></a>Update: switched back<br /></li>
            </ul>
          </section>
          <section id="slide-orge1bfbf2">
            <h3 id="orge1bfbf2">New Things</h3>
            <div class="outline-text-3" id="text-orge1bfbf2"></div>
          </section>
          <section id="slide-orgba2c89c">
            <h4 id="orgba2c89c">Shayne Easterwood</h4>
            <ul>
              <li>NOISeq Analysis</li>
              <li>SAF Format for eRNA formats</li>
              <li>A chance to clean up</li>
            </ul>
          </section>
          <section id="slide-org4f406de">
            <h4 id="org4f406de">Linear Model / Time Series Analysis</h4>
          </section>
          <section id="slide-orgec6c2d9">
            <h4 id="orgec6c2d9">Limma</h4>
            <ul>
              <li>
                <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4937821/"
                  >RNA-seq analysis is easy as 1-2-3 with limma, Glimma and
                  edgeR</a
                >
              </li>
              <li>
                <a
                  href="http://bioinf.wehi.edu.au/folders/limmaWorkflow/glimma-plots/MDS-Plot.html"
                  >glimma Plots</a
                >
              </li>
            </ul>
          </section>
          <section
            id="slide-org1118f15"
            data-background="img/limma/GM19_fig1_limma.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h4 id="org1118f15"></h4>
          </section>
          <section
            id="slide-org5abc053"
            data-background="img/limma/IMR_fig1_limma.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h4 id="org5abc053"></h4>
          </section>
          <section
            id="slide-org16214c0"
            data-background="img/limma/GM19_fig2_limma.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h4 id="org16214c0"></h4>
          </section>
          <section
            id="slide-orgc7ba5c5"
            data-background="img/limma/IMR_fig2_limma.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h4 id="orgc7ba5c5"></h4>
          </section>
          <section
            id="slide-org6229765"
            data-background="img/limma/GM19_fig3_limma.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h4 id="org6229765"></h4>
          </section>
          <section
            id="slide-org58b05e6"
            data-background="img/limma/IMR_fig3_limma.png"
            data-background-size="800px"
            data-background-transition="slide"
          >
            <h4 id="org58b05e6"></h4>
          </section>
          <section id="slide-orgfc3f90f">
            <h4 id="orgfc3f90f">Future</h4>
            <ul>
              <li>Get List of Top Genes</li>
              <li>Link eRNAs and Top genes</li>
              <li>Compare IMR and GM Genes</li>
              <li>Kinetics of the eRNAs</li>
            </ul>
          </section>
        </section>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js/js/reveal.js"></script>

    <script>
      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: false,
        center: true,
        slideNumber: "c",
        rollingLinks: false,
        keyboard: true,
        overview: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || "default", // default/cube/page/concave/zoom/linear/fade/none
        transitionSpeed: "default",
        multiplex: {
          secret: "", // null if client
          id: "", // id, obtained from socket.io server
          url: "" // Location of socket.io server
        },

        // Optional libraries used to extend on reveal.js
        dependencies: [
          ,
          {
            src: "https://cdn.jsdelivr.net/npm/reveal.js/lib/js/classList.js",
            condition: function() {
              return !document.body.classList;
            }
          },
          {
            src:
              "https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/marked.js",
            condition: function() {
              return !!document.querySelector("[data-markdown]");
            }
          },
          {
            src:
              "https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js",
            condition: function() {
              return !!document.querySelector("[data-markdown]");
            }
          },
          {
            src:
              "https://cdn.jsdelivr.net/npm/reveal.js/plugin/zoom-js/zoom.js",
            async: true,
            condition: function() {
              return !!document.body.classList;
            }
          },
          {
            src: "https://cdn.jsdelivr.net/npm/reveal.js/plugin/notes/notes.js",
            async: true,
            condition: function() {
              return !!document.body.classList;
            }
          }
        ]
      });
    </script>
  </body>
</html>
